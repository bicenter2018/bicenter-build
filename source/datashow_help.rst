.. _dataShow:

前言
===========================
综合看板主要用来做数据的可视化展示和布局，支持多数据源，多种图形组合布局，使用简单，操作时在页面进行拖拽即可完成看板设计。
目前支持的图形组件有HTML片段，饼图，色带仪表，关系图，直角坐标，地理坐标，表格及雷达图，运行状态图，嵌套环形图。其中，色带仪表支持仪表和色带两种图形，直角坐标支持线图，条形图和条形堆叠图，地理坐标支持散点图和动效散点图，线图和动效线图。

安装配置
================
安装
--------------


BICENTER-DataShow是以.zip格式发布的安装包，以jetty内置容器方式启动，运行依赖java，在部署时只需将安装包解压到一个任意目录文件夹，
在安装了java并配置好了java环境变量的的客户端直接启动，否则需要安装java，解压以后如下图:
 .. image :: _static/images/1.1.png   


配置
-----------------
BICENTER-DataShow的所有配置是通过文件config.properties配置的，主要配置以下内容：
 * 访问的host和端口号（host，port），根据实际配置即可 
 * 前端源文件存放目录（webcontent），
 * 报表文件存放目录（webroot）
 * 数据源，可配置多个数据源
 * 配置完成以后的文件如下：
  .. image :: _static/images/1.2.png  


启动
----------------------
启动时，如果是Windows环境直接运行start.bat，如果是Linux环境运行start.sh，启动以后，浏览器访问直接访问http://[host]:[port],开始看板的设计

设计
====================
看板设计有两个入口，一是首页的【新建】按钮，一是对应文件后面的【编辑】按钮，进入设计面板即可开始看板的设计工作。

设计全局属性 
--------------------
全局属性是设置看板的全局外观属性，	在设计面板，点击【全局属性】，显示全局属性面板如下：
  .. image :: _static/images/2.1.png
* 像素宽，像素高：根据需要展示的屏幕分辨率设置，手动拖动调整或者输入分辨率数值
* 水平网格数：主要组织组件的布局
* 背景颜色：画布背景颜色，通过点击选择适合的背景颜色
* 配色主题：设置看板的主题 

组件列表
--------------------
组件列表展示了看板支持的组件，每个组件对应不同的图形展示，在设计页面点击【组件列表】，可以看到支持的组件如下：
  .. image :: _static/images/2.2.1.png
使用时，设计者可以任意拖动对应的组件到设计器页面位置，当鼠标变成双向箭头时则可以拖动组件大小。
 .. image :: _static/images/2.2.2.png
  
设置组件外框属性
--------------------
组件的外框属性，定义了每个组件的外观属性，通过设置可以改变组件的外观。双击组件，即显示每个组件各自对应的组件属性面板，显示如下:
 .. image :: _static/images/2.3.png
* 标题栏：设置组件的标题信息
* 背景：设置组件背景颜色，如果勾选了背景透明，则显示设计页面的背景色
* 框线：设置组件边框属性，可以拖动或者输入框线范围值
* 阴影：设置组件阴影，包括显示和不显示


组件数据绑定
-------------------
HTML片段
~~~~~~~~~~~~
一般用来展示某个指标，标记某个信息等，属性面板包括以下设置:
 .. image :: _static/images/2.4.1.1.png
* 字体：设置组件要展示的字体样式
* html模板：输入自定义html样式，取变量的方式是${变量名}
* 数据：绑定数据
例如：展示监控报警系统报警的次数，组织SQL查询如下：
select  count(*)  as  count  from  tbl_ci_base_info 
点击数据后面【....】弹出数据绑定对话框进行数据绑定，在数据绑定选择要展示的数据字段名称
 .. image :: _static/images/2.4.1.2.png
查看数据绑定结果如下：
 .. image :: _static/images/2.4.1.3.png

饼图
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
平铺饼图
..............................
饼图展示的数据只能是单序列数据，一般用于展示比例百分比，属性面板包括如下设置：
 .. image :: _static/images/2.4.2.1.png
* 图例：选择图例显示在组件上的位置，可以选择不显示或者居右，底部，居上或者居左
* 数据：绑定数据
例如：展示监控报警系统排名前10的设备报警的次数所占比例，组织SQL查询：
SELECT t2.name jobName,SUM(t1.event_count) counts FROM alert_event_summary t1,job t2 WHERE t1.major_ver IN (1,2,3,4,5,7,8,9)
AND t1.job_id = t2.job_id AND t1.node_id  = t2.node_id GROUP BY t1.job_id  ORDER BY counts DESC LIMIT 10
点击数据后面【...】弹出数据绑定对话框，数据绑定时，“指标名称”可以是自定义的指标名称，可以不填，“值字段”对应的饼图的数值，“名称字段”对应饼图的类别，“位置”对应图形在页面的显示的位置
 .. image :: _static/images/2.4.2.2.png
查看绑定结果如下:
 .. image :: _static/images/2.4.2.3.png
 

同心圆
..................................
如果要展示为同心圆的图形，在数据绑定时，填写位置栏，数字小在内圈，数字大的在外圈，例如：
 .. image :: _static/images/2.4.2.4.png
展示结果为：
 .. image :: _static/images/2.4.2.5.png
 
色带仪表
~~~~~~~~~~~~~~~~~~~~~~~~~~
色带仪表组件可以制作仪表和色带两种图形，设计时根据需求在属性面板选择不同的图形类别：
 .. image :: _static/images/2.4.3.1.png
* 图形：可以选择仪表和色带两种图形展示，如果选择仪表则设置仪表属性
* 最小值：仪表刻度的最小刻度值
* 最大值：仪表刻度的最大刻度值
* 起始角度：仪表开始的角度
* 截止角度：仪表截止的角度
* 图形占比：仪表所占组件的比例，可以拖动或者输入数值
* 表盘线宽：仪表的宽度
* 刻度长度：标记仪表刻度的长度
* 指针宽度：仪表指针的大小宽度
* 色带背景色：选择图形为色带时，色带的背景色
* 值域色：选择图形为色带时，色带数值的显示颜色
* 数据：仪表或者色带都是用过数据绑定数据

仪表
..............................

色带
...............................

关系图
~~~~~~~~~~~~~~~~~~~

直角坐标
~~~~~~~~~~~~~~~~~~~~~
线图
....................

条图
.....................

条图堆叠
.....................

地理坐标
~~~~~~~~~~~~~~~~~~~~~~~~~~~

散点图及动效散点图
............................

线图及动效线图
.............................

表格
~~~~~~~~~~~~~~~~~~~~~~~

雷达图
~~~~~~~~~~~~~~~~~~~~~~~~~
运行状态图
.............................

嵌套环形图
..............................

圆环
~~~~~~~~~~~~~~~~~~~~~~~
分组框
~~~~~~~~~~~~~~~~~~~~~
删除组件
=====================
复制组件
========================
保存
============================
查看
==================================

												   